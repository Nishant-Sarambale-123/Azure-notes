Got it üëç Now let‚Äôs go deep into **Identity & Security in Azure**.
Same style ‚Üí **Detailed Notes ‚Üí Interview Q\&A ‚Üí Scenario Q\&A**.

---

# üîê Core Azure Services ‚Äì Identity & Security

## üë§ Azure Active Directory (AAD)

* **Cloud-based identity & access management (IAM)** service.
* Provides:

  * Authentication (who you are).
  * Single Sign-On (SSO) ‚Üí one login for multiple apps (Office 365, SaaS, custom apps).
  * Authorization (what you can do) via RBAC.
* Integrates with **on-prem Active Directory** using **Azure AD Connect**.
* Supports **OAuth2, OpenID Connect, SAML, WS-Fed**.

---

## üé≠ Role-Based Access Control (RBAC)

* Controls **who can do what** in Azure.
* **Scope levels**: Management group ‚Üí Subscription ‚Üí Resource group ‚Üí Resource.
* Roles:

  * Owner ‚Üí full access, including RBAC.
  * Contributor ‚Üí full access, except RBAC.
  * Reader ‚Üí view only.
  * Custom roles ‚Üí JSON-based definitions.
* Example: Assign ‚ÄúStorage Blob Data Reader‚Äù role to a user to allow blob read access.

---

## üÜî Managed Identities

* Provide an **Azure AD identity for Azure resources (VMs, Functions, Apps, etc.)**.
* Two types:

  * **System-assigned**: tied to one resource, deleted if resource is deleted.
  * **User-assigned**: independent identity, can be shared across resources.
* Used to **authenticate apps/services without secrets**.
* Example: A Function App uses a managed identity to access Key Vault secrets.

---

## üîë Azure Key Vault

* Securely stores **secrets (passwords, API keys), certificates, encryption keys**.
* Features:

  * Integration with AAD ‚Üí RBAC/ACL-based access.
  * Key rotation, auditing, versioning.
  * HSM (Hardware Security Module) backed keys.
* Used with Managed Identities to remove hardcoded credentials.

---

## üìú Conditional Access Policies

* Security policies that control access based on **conditions**:

  * User/group.
  * Device state (compliant, hybrid joined).
  * Location/IP.
  * Risk level (from Identity Protection).
* Actions: Require MFA, block access, allow with restrictions.
* Example: Only allow finance users to access app from corporate network.

---

## üîí Multi-Factor Authentication (MFA)

* Adds a second authentication step:

  * Phone call, SMS, Microsoft Authenticator app, hardware token.
* Can be enforced globally or via Conditional Access.
* Reduces risk of credential theft/phishing.

---

# üéØ Interview Questions & Answers

### Basic

1. **Q: What is the difference between Azure AD and Active Directory (on-prem)?**

   * **A**: AD = on-prem directory, Kerberos-based, manages domain-joined machines. Azure AD = cloud-based IAM, supports SaaS, OAuth, SSO.

2. **Q: What is RBAC in Azure?**

   * **A**: A system to assign permissions at various scopes (MG, subscription, RG, resource) using predefined/custom roles.

3. **Q: What is Key Vault used for?**

   * **A**: To securely store secrets, keys, certificates, and integrate with apps via AAD authentication.

---

### Intermediate

4. **Q: Difference between system-assigned and user-assigned managed identity?**

   * **A**: System-assigned ‚Üí tied to one resource, auto-deleted. User-assigned ‚Üí independent, reusable across multiple resources.

5. **Q: How do Conditional Access Policies improve security?**

   * **A**: By enforcing rules (like MFA, block risky sign-ins, restrict by location) to reduce unauthorized access.

6. **Q: How does RBAC differ from IAM in AWS?**

   * **A**: Azure RBAC is scope-based with roles assigned at hierarchy levels. AWS IAM uses users, groups, and policies attached directly.

---

### Advanced

7. **Q: How do you implement zero-trust security in Azure?**

   * **A**: Enforce MFA, use Conditional Access, Managed Identities, least privilege RBAC, Just-in-Time (JIT) access with Privileged Identity Management (PIM).

8. **Q: How do you secure secrets in a CI/CD pipeline?**

   * **A**: Store them in **Key Vault**, access via **Managed Identity**, never hardcode in pipeline YAML.

9. **Q: How can you detect risky logins in Azure AD?**

   * **A**: Use **Azure AD Identity Protection** ‚Üí detects suspicious sign-ins (impossible travel, leaked credentials) and applies Conditional Access.

---

# üõ† Scenario-Based Q\&A

1. **Scenario**: Your team hardcodes DB connection strings in app configs. How do you fix this?

   * **Answer**: Move secrets to **Azure Key Vault**, grant access using **Managed Identity**, app retrieves them securely at runtime.

2. **Scenario**: A contractor needs temporary access to a resource group. How do you grant it?

   * **Answer**: Assign RBAC role with **time-bound access** using **PIM (Privileged Identity Management)**.

3. **Scenario**: A user reports account compromise. How do you secure access?

   * **Answer**: Reset password, enforce MFA, review sign-ins, apply stricter Conditional Access.

4. **Scenario**: A compliance policy requires database access only from corporate network. How do you enforce this?

   * **Answer**: Use **Conditional Access Policy** ‚Üí allow only corporate IP ranges.

5. **Scenario**: You need to give an app access to Storage Blob without exposing keys. Solution?

   * **Answer**: Enable **Managed Identity** for the app, assign **Storage Blob Data Contributor** role in RBAC.

6. **Scenario**: An org wants to migrate from AD FS (federation) to Azure AD. How do you handle authentication?

   * **Answer**: Use **Azure AD Connect** (for sync) + enable **Azure AD Authentication** with SSO.

---

‚ö° Next up we can cover either:
üëâ **Monitoring & Management (Monitor, Log Analytics, Alerts, Advisor, Cost Management)**
üëâ or **DevOps & CI/CD (Azure DevOps, GitHub Actions, Pipelines, Infrastructure as Code)**

Which one should I prepare for you next?
